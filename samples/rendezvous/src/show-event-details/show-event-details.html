<dv.component name="show-event-details">
  <div class="index">
    <rendezvous.navbar showProfileButton=true />
    <eventdetails.show-object id=$eventId hidden=true />
    <authorization.show-owner resourceId=$eventId hidden=true />

    <div class="new-event">
      <div class="card">
        <div class="card-header event-name">
          <!-- Event Title -->
          <eventdetails.show-object
            object=eventdetails.show-object.loadedObject
            showOnly=["title"] />
        </div>

        <div class="card-body">
          <div id="hostBadge">
            <!-- Host -->
            Hosted By
            <span class="badge userBadge">
              <rendezvous.show-member-name class="inline-block"
                id=authorization.show-owner.ownerId /> |
            </span>
            <dv.link class="inline-block" href="/profile"
              params={ id: authorization.show-owner.ownerId }>
              Profile
            </dv.link>
          </div>

          <div id="attendees-panel">
            <!-- List of Attendees -->
            <p>Attendees</p>
            <div class="card-body" id="attendees-body">
              <group.show-members inGroupId=$eventId
                showMember=<rendezvous.show-member-name id=$id /> />
            </div>
          </div>

          <!-- Relevant Interests -->
          <div id="interests-panel">
            Relevant Interests
            <div class="card-body" id="interests-body">
              <relevantinterests.show-labels id="relevant-interests"
                itemId=$eventId
                noLabelsToShowText="No interests added for this event" />
            </div>
          </div>

          <div class="event-info-table">
            <p class="bold"> Event Details</p>
            <!-- Location -->
            <p class="oblique">Location:
              <span>
                <geolocation.show-marker id=$eventId
                  showId=false showMapId=false />
              </span>
            </p>

            <!-- Date + Time -->
            <p class="oblique">Date + Time:
              <span>
                <event.show-event id=$eventId />
              </span>
            </p>
          </div>

          <div class="event-details">
            <!-- Additional Info -->
            <p> Event Description</p>
            <div id="show-post">
              <eventdetails.show-object
                object=eventdetails.show-object.loadedObject
                  showOnly=["additionalInfo"] />
            </div>
          </div>

          <dv.if condition=rendezvous.navbar.loggedInUserId===authorization.show-owner.ownerId>
            <!-- TODO: Edit Event -->
            <div class="inline btn-group form-group" id="edit-event-button">
              <button class="btn button">Coming Soon: Edit Event</button>
            </div>

            <p id="event-host">
              YOU ARE THE HOST OF THIS EVENT
            </p>
          </dv.if>

          <!-- Join Group if already not in it -->
          <dv.if condition=rendezvous.navbar.loggedInUserId !==authorization.show-owner.ownerId>
            <div class="inline btn-group form-group" id="join-leave-group">
              <dv.tx>
                <authorization.add-remove-viewer resourceId=$eventId
                  viewerId=rendezvous.navbar.loggedInUserId hidden=true />

                <group.join-leave class="btn button" groupId=$eventId
                  memberId=rendezvous.navbar.loggedInUserId />
              </dv.tx>
            </div>
          </dv.if>

          <table id="comment-table" class="event-info event-display table">
            <tbody>
              <th>Comments</th>
              <dv.tx>
                <comment.create-comment
                  class="center"
                  authorId=rendezvous.navbar.loggedInUserId
                  targetId=$eventId
                  inputLabel="Post a new comment"
                  buttonLabel="Post" />
              </dv.tx>
              <comment.show-comments ofTargetId=$eventId
                showComment=<rendezvous.show-event-comment comment=$comment
                  loggedInUserId=rendezvous.navbar.loggedInUserId /> />
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</dv.component>
