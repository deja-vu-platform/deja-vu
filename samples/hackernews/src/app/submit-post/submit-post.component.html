<!-- TODO: users should not be able to access this page if not logged in -->
<!-- they should be redirected to the login page -->
<hackernews-navbar (user)="user=$event"></hackernews-navbar>

<div class="main">
  <div *ngIf="user">
    <dv-tx>
      <dv-id (id)="postId=$event"></dv-id>
      <property-create-object
        [id]="postId"
        [initialValue]="{ author: user.username }"
        [showExclude]="['author']"
        buttonLabel="submit"
        newObjectSavedText="Post submitted"
        (object)="post=$event"
      >
      </property-create-object>
      <scoring-create-score
        [targetId]="postId"
        [value]="0"
        [hidden]="true"
      >
      </scoring-create-score>
    </dv-tx>
  </div>

  <!-- TODO: remove this after figuring out redirect after submitting post -->
  <div *ngIf="post">
    <dv-link href="/item" [params]="{ id: post.id }">show post</dv-link>
  </div>
</div>
