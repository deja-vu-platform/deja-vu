<dv.action name="show-proposal">
  <accord.navbar accessRequired=true />
  <div class="left-column">
    <accord.set-list-catalog groupId=$groupId />
  </div>
  <proposal.show-object id=$proposalId hidden=true />

  <div class="left-column-50">
    <dv.if condition=!!proposal.show-object.loadedObject>
      <div class="individual-card">
        <h1>
          <dv.show-entity entity=proposal.show-object.loadedObject.songTitle />
          <dv.if class="inline-block" condition=proposal.show-object.loadedObject.addedBy===accord.navbar.loggedInUserId>
            <dv.link class="plain" href="/edit-proposal" params={ groupId:$groupId, proposalId:$proposalId }>
              <mat-icon>
                edit
              </mat-icon>
            </dv.link>
          </dv.if>
        </h1>
        by <dv.show-entity entity=proposal.show-object.loadedObject.songArtist />
      </div>

      <div class="individual-card">
        <h3>Lyrics</h3>
        <dv.show-entity entity=proposal.show-object.loadedObject.lyrics />
      </div>
    </dv.if>

    <div class="individual-card">
      <h3>Media</h3>
      <media.show-objects showObject=<accord.show-media media=$object deletable=false />
                          fieldMatching={proposalId:$proposalId} />
    </div>

    <div class="individual-card">
      <h3>Comments</h3>
      <comment.show-comments ofTargetId=$proposalId
                             showComment=<accord.show-comment comment=$comment userId=accord.navbar.loggedInUserId />
      />
      <comment.create-comment authorId=accord.navbar.loggedInUserId targetId=$proposalId />
    </div>

  </div>
  <div class="left-column">
    <div>
      <dv.if condition=!!proposal.show-object.loadedObject>
        Added By <userProfile.show-object id=proposal.show-object.loadedObject.addedBy
                                          showOnly=["firstName"] />
      </dv.if>
    </div>
    <div>
      Your Rating: <rating.rate-target sourceId=accord.navbar.loggedInUserId
                                       targetId=$proposalId />
    </div>
    <div>
      Average Rating: <rating.show-average-rating targetId=$proposalId />
    </div>
  </div>
</dv.action>
