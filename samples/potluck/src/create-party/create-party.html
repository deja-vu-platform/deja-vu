<dv.action name="create-party">
  <potluck.navbar />
  <authentication.show-users hidden=true />

  <div class="container" id="homepage-container">
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-12">
          <dv.link href="parties" class="btn btn-primary">
            <i class="material-icons icon">arrow_back</i>
            Back to Your Parties
          </dv.link>
        </div>
      </div>
      <div class="row">
        <div class="col-md-10 offset-md-1 list-group-item"
          id="party-form-content">
          <div class="row" id="party-form-header">
            <div class="col-md-12">
              <h4 id="create-party-title">Create a New Party</h4>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-horizontal">
                <dv.tx as potluck-create-party-form>
                  <dv.id />
                  <dv.status savedText="Party created" />
                  <div class="row">
                    <div class="col-md-5">
                      <party.create-object id=dv.id.id showOptionToSubmit=false />
                    </div>
                    <div class="col-md-5 offset-md-2">
                      <event.create-event id=dv.id.id showOptionToSubmit=false />
                    </div>
                  </div>
                  <hr class="divider" />
                  <div class="row">
                    <div class="col-md-5">
                      <!-- cant do a show in a tx -->
                      <!-- <group.create-group id=dv.id.id
                        showOptionToSubmit=false
                        creatorId=potluck.navbar.loggedInUserId
                        choices=authentication.show-users.fetchedUserIds
                        showMember=<authentication.show-user id=$id
                          showId=false /> /> -->
                        <group.create-group id=dv.id.id
                          showOptionToSubmit=false
                          showOptionToAddMembers=false
                          creatorId=potluck.navbar.loggedInUserId
                          hidden=true />
                    </div>
                    <div class="col-md-5 offset-md-2">
                      <!-- stage-objects -->
                      <dv.stage
                        stageEntity=
                          <dv.action stage$=potluck.create-supply.stagedSupply>
                            <potluck.create-supply />
                          </dv.action>
                        showEntity=<potluck.show-supply supplyObj=$entity />
                        stageHeader=<potluck.supply-list-header /> />
                    </div>
                  </div>

                  <!-- <supply.create-objects objects=dv.stage.stagedEntities
                    hidden=true />
                  <transfer.add-to-balance accountId=dv.id.id
                    amount=dv.stage.stagedEntities hidden=true /> -->


                  <authorization.create-resource id=dv.id.id
                    ownerId=potluck.navbar.loggedInUserId
                    hidden=true />
                    <!-- viewerIds=group.create-group.stagedMemberIds  -->

                  <authentication.authenticate id=potluck.navbar.loggedInUserId
                    hidden=true />

                  <div class="row" id="party-form-footer">
                    <div class="offset-md-4 col-md-3">
                      <dv.button>Create Party</dv.button>
                      <dv.callback defaultHref="/parties" onExecSuccess=true
                        hidden=true />
                    </div>
                  </div>
                </dv.tx>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</dv.action>
