<dv.component name="navbar" loggedInUser$=authentication.logged-in.user
  searchResults$=label.search-items-by-labels.searchResultItems>

  <dv.tx>
    <authentication.logged-in />
    <dv.if condition=$accessRequired>
      <dv.redirect href="/login" onEvalFailure=true />
    </dv.if>
  </dv.tx>

  <nav id="nav-bar" class="navbar navbar-light">
    <div class="container-fluid">

      <div class="navbar-header">
        <dv.link class="sweet-spots-heading navbar-brand" href="/">
          Sweet Spots
        </dv.link>
      </div>

      <div class="form-inline navbar-left search">
        <label.search-items-by-labels searchPlaceholder="Choose Category"
          hidden=!$showSearch />
      </div>

      <dv.if condition=authentication.logged-in.user>
        <div class="form-inline">
          <p class="navbar-text navbar-right inline-block">
            Hello, <authentication.show-user class="inline-block"
              user=authentication.logged-in.user
              showId=false />! &nbsp;
          </p>
          <div class="btn-toolbar toolbar">
            <dv.tx>
              <authentication.sign-out class="btn btn-danger"
                buttonLabel="Logout"/>
              <dv.link href="/login" hidden=true />
            </dv.tx>
            &nbsp;
            <dv.link href="/profile"
              params={ userId: authentication.logged-in.user?.id }
              class="mat-button btn btn-info profile-btn">
              Profile
            </dv.link>
          </div>
        </div>
      </dv.if>

      <dv.if condition=!authentication.logged-in.user>
        <div class="form-inline navbar-right">
          <div class="btn-toolbar toolbar">
            <dv.link href="/login" class="mat-button btn btn-primary login-btn">
              Login
            </dv.link>
            &nbsp;
            <dv.link href="/register"
              class="mat-button btn btn-info register-btn">
              Register
            </dv.link>
          </div>
        </div>
      </dv.if>
    </div>
  </nav>
</dv.component>
