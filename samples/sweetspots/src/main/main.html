<dv.action name="main">
  <sweetspots.navbar showSearch=true accessRequired=false />

  <div id="left-main-div">
    <dv.if condition=sweetspots.navbar.loggedInUserId && !sweetspots.navbar.searchResults>
      <dv.if condition=!geolocation.display-map.newMarker>
        <sweetspots.add-a-spot />
      </dv.if>

      <dv.if condition=geolocation.display-map.newMarker>
        <sweetspots.add-a-spot-form loggedInUserId=sweetspots.navbar.loggedInUserId/>
      </dv.if>
    </dv.if>

    <dv.if condition=!sweetspots.navbar.loggedInUserId>
        To use this feature, please sign in or register.
    </dv.if>

    <div id="search-results">
      <h3>Top Spots</h3>
      <label.show-items waitOn=sweetspots.navbar.searchResults
        noItemsToShowText="No spots found. Try searching for something else."
        showItem=<sweetspots.show-result-item id=$id /> />
    </div>
  </div>

  <div id="map-div">
    <!-- TODO: Only show spots from search results -->
    <geolocation.display-map id="mainMapId"
      showDirectionsControl=false />
  </div>

</dv.action>
