<div class="row">
  <div class="col-md-12">
    <form (ngSubmit)="stage()"
      [formGroup]="stageForm"
      class="form-horizontal">
      <div class="form-group">
        <group-autocomplete
          [autocompletePlaceholder]="autocompletePlaceholder"
          [type]="type"
          [disabledIds]="staged"
          [showMember]="showMember"
          [showGroup]="showGroup"
          formControlName="autocomplete"
          [required]="true">
        </group-autocomplete>
      </div>
      <div class="form-group">
        <button mat-button type="submit" [disabled]="!stageForm.valid">
          {{buttonLabel}}
        </button>
      </div>
    </form>
  </div>
</div>

<div *ngIf="stageHeader" class="row">
  <div class="col-md-12">
    <dv-include [action]="stageHeader" no-default [parent]="stageComponent">
    </dv-include>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <ul *ngIf="staged && staged.length > 0"
      class="list-group">
      <li *ngFor="let id of staged" class="list-group-item">
        <div class="row">
          <div class="col-md-10">
            <div *ngIf="type === 'member'">
              <dv-include [action]="showMember" [inputs]="{
                id: id
               }"
               [parent]="stageComponent">
              </dv-include>
            </div>
            <div *ngIf="type === 'group'">
              <dv-include [action]="showGroup" [inputs]="{
                id: id,
                showMembers: false,
                showSubgroups: false
               }"
                [parent]="stageComponent">
              </dv-include>
            </div>
          </div>
          <div class="col-md-2">
            <button mat-button (click)="unstage(id)" class="eject">
              <i class="material-icons icon">eject</i>
            </button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
