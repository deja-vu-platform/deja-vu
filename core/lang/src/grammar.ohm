Cliche {
  /**
   * Capitalized ("syntactic") rules implicitly skip whitespace characters
   * Lowercase ("lexical") rules don't
   **/
  ClicheDecl = cliche name ClicheUsesDecl? "{" Paragraph* "}"

  RouteDecl = route "\""name"\""
  ClicheUsesDecl = uses usedClicheName AsDecl* ("," usedClicheName AsDecl*)*
  AsDecl = as name

  Paragraph
    = DataDecl -- data
    | WidgetDecl -- widget

  DataDecl = data name ("," name)* "{" FieldBody* "}" BondDecl*

  WidgetDecl = main? widget name ("," name)* RouteDecl* WidgetUsesDecl* "{" FieldBody* "}"
  WidgetUsesDecl = uses usedWidgetName AsDecl? RouteDecl? ("," usedWidgetName AsDecl* RouteDecl*)*

  FieldBody = FieldDecl ("," FieldDecl)*
  FieldDecl = name ":" name BondDecl*

  BondDecl = "=" name (("+" | "|") name)*

  name = alnum* (("/" | "." | "_") alnum*)*
  usedClicheName = alnum* "/" alnum*
  usedWidgetName = (alnum* ".")? alnum*
  comment = singleLineComment | multiLineComment
  singleLineComment = "//" (~eol any)*
  eol = "\r"?"\n"
  multiLineComment = "/*" (~"*/" any)* "*/"

  uses = "uses"
  widget = "widget"
  cliche = "cliche"
  data = "data"
  main = "main"
  route = "route"
  as = "as"

  // from the es5 grammar example
  space := whitespace | lineTerminator | comment
  whitespace = "\t"
             | "\x0B"    -- verticalTab
             | "\x0C"    -- formFeed
             | " "
             | "\u00A0"  -- noBreakSpace
             | "\uFEFF"  -- byteOrderMark
             | unicodeSpaceSeparator
  unicodeSpaceSeparator = "\u2000".."\u200B" | "\u3000"
  lineTerminator = "\n" | "\r" | "\u2028" | "\u2029"
}
